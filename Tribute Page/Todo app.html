<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f1dc;
            margin: 0;
            padding: 0;
            display: flex;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background: #f4d27a;
            padding: 20px;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            overflow-y: auto;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar ul li {
            padding: 10px;
            cursor: pointer;
            transition: 0.3s;
        }

        .sidebar ul li.active {
            background: white;
            border-radius: 5px;
        }

        /* Content */
        .content {
            margin-left: 270px;
            padding: 20px;
            width: calc(100% - 270px);
        }

        .add-task {
            background: #f4d27a;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 10px;
            display: inline-block;
        }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th, td {
            padding: 10px;
            border-bottom: 1px solid #ddd;
            text-align: left;
        }

        .priority-high {
            color: red;
        }

        .priority-medium {
            color: orange;
        }

        .edit, .delete, .mark-complete {
            cursor: pointer;
            margin: 0 5px;
        }

        /* Mobile Fix - Full Width */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                display: flex;
                justify-content: space-around;
            }

            .content {
                margin-left: 0;
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <ul>
            <li id="pendingTab" class="active" onclick="switchTab('pending')">Pending Tasks</li>
            <li id="completedTab" onclick="switchTab('completed')">Completed Tasks</li>
            <li>Calendar</li>
            <li>Settings</li>
        </ul>
    </div>

    <div class="content">
        <h2>Welcome John üëã</h2>
        <div class="add-task" onclick="showTaskModal()">+ Add New Task</div>

        <table>
            <thead>
                <tr>
                    <th>Project Name</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>Priority</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="task-list"></tbody>
        </table>
    </div>

    <!-- Task Modal -->
    <div id="task-modal" style="display: none; position: fixed; top: 20%; left: 30%; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 0 10px gray;">
        <h3>Add/Edit Task</h3>
        <input type="hidden" id="edit-index">
        <input type="text" id="task-name" placeholder="Project Name" required><br><br>
        <input type="date" id="start-date" required><br><br>
        <input type="date" id="end-date" required><br><br>
        <select id="priority">
            <option value="High">High</option>
            <option value="Medium">Medium</option>
        </select><br><br>
        <button onclick="saveTask()">Save Task</button>
        <button onclick="closeTaskModal()">Cancel</button>
    </div>

    <script>
        let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
        let currentTab = "pending";

        function switchTab(tab) {
            currentTab = tab;
            document.getElementById("pendingTab").classList.remove("active");
            document.getElementById("completedTab").classList.remove("active");

            if (tab === "pending") {
                document.getElementById("pendingTab").classList.add("active");
            } else {
                document.getElementById("completedTab").classList.add("active");
            }
            renderTasks();
        }

        function showTaskModal(index = null) {
            document.getElementById("task-modal").style.display = "block";
            if (index !== null) {
                document.getElementById("edit-index").value = index;
                document.getElementById("task-name").value = tasks[index].name;
                document.getElementById("start-date").value = tasks[index].start;
                document.getElementById("end-date").value = tasks[index].end;
                document.getElementById("priority").value = tasks[index].priority;
            } else {
                document.getElementById("edit-index").value = "";
                document.getElementById("task-name").value = "";
                document.getElementById("start-date").value = "";
                document.getElementById("end-date").value = "";
                document.getElementById("priority").value = "High";
            }
        }

        function closeTaskModal() {
            document.getElementById("task-modal").style.display = "none";
        }

        function saveTask() {
            let index = document.getElementById("edit-index").value;
            let name = document.getElementById("task-name").value;
            let start = document.getElementById("start-date").value;
            let end = document.getElementById("end-date").value;
            let priority = document.getElementById("priority").value;

            if (name && start && end) {
                let task = { name, start, end, priority, completed: false };
                if (index) {
                    tasks[index] = task;
                } else {
                    tasks.push(task);
                }
                localStorage.setItem("tasks", JSON.stringify(tasks));
                closeTaskModal();
                renderTasks();
            }
        }

        function deleteTask(index) {
            tasks.splice(index, 1);
            localStorage.setItem("tasks", JSON.stringify(tasks));
            renderTasks();
        }

        function markComplete(index) {
            tasks[index].completed = true;
            localStorage.setItem("tasks", JSON.stringify(tasks));
            renderTasks();
        }

        function renderTasks() {
            let taskList = document.getElementById("task-list");
            taskList.innerHTML = "";
            tasks.forEach((task, index) => {
                if ((currentTab === "pending" && !task.completed) || (currentTab === "completed" && task.completed)) {
                    taskList.innerHTML += `
                        <tr>
                            <td>${task.name}</td>
                            <td>${task.start}</td>
                            <td>${task.end}</td>
                            <td class="${task.priority === "High" ? "priority-high" : "priority-medium"}">${task.priority}</td>
                            <td>
                                ${currentTab === "pending" ? `<span class="mark-complete" onclick="markComplete(${index})">‚úîÔ∏è</span>` : ""}
                                <span class="edit" onclick="showTaskModal(${index})">‚úèÔ∏è</span>
                                <span class="delete" onclick="deleteTask(${index})">üóëÔ∏è</span>
                            </td>
                        </tr>
                    `;
                }
            });
        }

        renderTasks();
    </script>

</body>
</html>